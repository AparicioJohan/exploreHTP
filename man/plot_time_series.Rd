% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fct_exctract.R
\name{plot_time_series}
\alias{plot_time_series}
\title{Save per-plot time-series figures (masked and/or unmasked)}
\usage{
plot_time_series(
  plot_shape,
  plot_id,
  path_out,
  trial_name,
  angle = NULL,
  base_size = 14,
  save_plots = TRUE,
  save_masked_plots = TRUE,
  img_width = 8,
  img_height = 6
)
}
\arguments{
\item{plot_shape}{An `sf` object (polygons) containing at least the column
named in `plot_id`. Typically the trial grid or per-plot shapefile.}

\item{plot_id}{Character scalar. Name of the column in `plot_shape` that
identifies unique plots (e.g., `"plot"`).}

\item{path_out}{Character scalar. Root output directory (created if needed).}

\item{trial_name}{Character scalar. Trial identifier used to build paths.
The function expects to find input images under
`<path_out>/<trial_name>/plot/` and `<path_out>/<trial_name>/plot_mask/`,
and a geopackage at
`<path_out>/<trial_name>/shape_files/shape_<trial_name>.gpkg`.}

\item{angle}{Numeric or `NULL`. Rotation/angle feature.}

\item{base_size}{Numeric. Base text size passed into the internal
`plot_organizer()` call for ggplot theming. Default `14`.}

\item{save_plots}{Logical. If `TRUE`, save unmasked time-series figures
(from the `plot/` directory). Default `TRUE`.}

\item{save_masked_plots}{Logical. If `TRUE`, save masked time-series figures
(from the `plot_mask/` directory). Default `TRUE`.}

\item{img_width, img_height}{Numerics giving the intended figure width/height
in inches. Default `width = 8`, `height = 6`.}
}
\value{
Invisibly returns `NULL`. The primary side-effect is writing PNG files
to disk. If both `save_plots` and `save_masked_plots` are `FALSE`, the
function returns immediately without doing any work.
}
\description{
Iterates over all unique plot IDs in an `sf` polygon layer and saves
time-series figures for each plot. You can save the standard plots
(from `plot/`) and/or the masked plots (from `plot_mask/`). Files are
written to `<path_out>/<trial_name>/plots_time/` as PNGs.
}
\details{
For each unique value of `plot_id` in `plot_shape`, the function:
1) calls `plot_organizer()` to construct the per-plot figure (using either
   `plot/` or `plot_mask/`),
2) creates `<path_out>/<trial_name>/plots_time/` if it does not exist,
3) saves a PNG named `ID_<plot>.png` (unmasked) and/or `ID_<plot>_mask.png`
   (masked).

A progress spinner is shown via **cli**.
}
\section{Output files}{

Files are written to:
- `<path_out>/<trial_name>/plots_time/ID_<plot>.png`
- `<path_out>/<trial_name>/plots_time/ID_<plot>_mask.png`
}

\examples{
\dontrun{
library(sf)

grid <- st_read("grid_shape_cut.gpkg")

plot_time_series(
  plot_shape = grid,
  plot_id = "plot",
  path_out = "extraction",
  trial_name = "HARS25_chips",
  angle = NULL,
  base_size = 14,
  save_plots = TRUE,
  save_masked_plots = TRUE,
  img_width = 8,         # currently ignored by the function
  img_height = 6         # currently ignored by the function
)
}

}
